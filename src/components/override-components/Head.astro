---
import theme from "@/config/theme.json";
const { head } = Astro.locals.starlightRoute;

// font families
const pf = theme.fonts.font_family.primary;
const sf = theme.fonts.font_family.secondary;

let fontPrimary, fontSecondary;
if (theme.fonts.font_family.primary) {
  fontPrimary = theme.fonts.font_family.primary
    .replace(/\+/g, " ")
    .replace(/:[ital,]*[ital@]*[wght@]*[0-9,;.]+/gi, "");
}
if (theme.fonts.font_family.secondary) {
  fontSecondary = theme.fonts.font_family.secondary
    .replace(/\+/g, " ")
    .replace(/:[ital,]*[ital@]*[wght@]*[0-9,;.]+/gi, "");
}

// Build Google Fonts URLs
const primaryFontURL = `https://fonts.googleapis.com/css2?family=${pf}&display=swap`;
const secondaryFontURL = `https://fonts.googleapis.com/css2?family=${sf}&display=swap`;
---

{head.map(({ tag: Tag, attrs, content }) => <Tag {...attrs} set:html={content} />)}

<!-- Google Fonts - loaded at runtime to avoid build-time network dependency -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href={primaryFontURL} rel="stylesheet" />
<link href={secondaryFontURL} rel="stylesheet" />

<!-- Font CSS Variables -->
<style is:inline>
  :root {
    --font-primary: {fontPrimary}, sans-serif;
    --font-secondary: {fontSecondary}, sans-serif;
  }
</style>

